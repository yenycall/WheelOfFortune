<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>타로 스토리 게임</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #0f0f2a;
            color: #fff;
            text-align: center;
            margin: 0;
            padding: 20px;
        }
        
        .game-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        h1 {
            color: #f8d348;
            margin-bottom: 30px;
        }
        
        .stage {
            margin-bottom: 30px;
        }
        
        .stage-title {
            font-size: 24px;
            margin-bottom: 15px;
            color: #f8d348;
        }
        
        .stage-description {
            margin-bottom: 20px;
            line-height: 1.6;
        }
        
        .cards-container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 30px;
        }
        
        .card {
            width: 150px;
            height: 250px;
            background-color: #272755;
            border: 2px solid #f8d348;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 20px rgba(248, 211, 72, 0.3);
        }
        
        .card.selected {
            border-color: #ff6b6b;
            box-shadow: 0 0 20px #ff6b6b;
        }
        
        .card-front {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            backface-visibility: hidden;
        }
        
        .card-name {
            font-weight: bold;
            margin-top: 10px;
        }
        
        .card-image {
            width: 100px;
            height: 150px;
            background-color: #121236;
            margin-bottom: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
        }
        
        .buttons {
            margin-top: 30px;
        }
        
        button {
            background-color: #f8d348;
            color: #0f0f2a;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            font-weight: bold;
            border-radius: 5px;
            cursor: pointer;
            margin: 0 10px;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #ff6b6b;
        }
        
        button:disabled {
            background-color: #666;
            cursor: not-allowed;
        }
        
        .story-text {
            background-color: #272755;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            line-height: 1.8;
            text-align: left;
        }
        
        .ending {
            margin-top: 30px;
            padding: 20px;
            background-color: #272755;
            border-radius: 10px;
            border: 2px solid #f8d348;
        }
        
        .ending h2 {
            color: #f8d348;
        }
        
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>운명의 타로 여정</h1>
        
        <div id="intro" class="stage">
            <div class="stage-description">
                당신 앞에 신비한 타로 카드가 놓여 있습니다. 각 단계마다 카드를 선택하여 당신만의 운명을 만들어가세요.
                총 5단계의 여정을 통해 당신의 운명이 결정됩니다.
            </div>
            <button id="start-button">여정 시작하기</button>
        </div>
        
        <div id="game-stage" class="stage hidden">
            <div class="stage-title" id="stage-title">제1장: 시작의 문</div>
            <div class="stage-description" id="stage-description">
                당신의 여정이 시작됩니다. 어떤 카드가 당신을 부르는지 직감으로 선택하세요.
            </div>
            
            <div class="cards-container" id="cards-container">
                <!-- 카드는 JS로 동적 생성됩니다 -->
            </div>
            
            <div class="story-text hidden" id="story-text"></div>
            
            <div class="buttons">
                <button id="next-button" disabled>다음 단계로</button>
            </div>
        </div>
        
        <div id="ending" class="stage hidden">
            <h2>당신의 운명</h2>
            <div id="ending-text" class="story-text"></div>
            <button id="restart-button">다시 시작하기</button>
        </div>
    </div>

    <script>
        // 타로 카드 정의
        const tarotCards = [
            { id: 0, name: "바보", symbol: "🃏" },
            { id: 1, name: "마법사", symbol: "✨" },
            { id: 2, name: "여사제", symbol: "🌙" },
            { id: 3, name: "여황제", symbol: "👑" },
            { id: 4, name: "황제", symbol: "⚔️" },
            { id: 5, name: "교황", symbol: "📜" },
            { id: 6, name: "연인들", symbol: "❤️" },
            { id: 7, name: "전차", symbol: "🏆" },
            { id: 8, name: "힘", symbol: "💪" },
            { id: 9, name: "은둔자", symbol: "🔦" },
            { id: 10, name: "운명의 수레바퀴", symbol: "🎡" },
            { id: 11, name: "정의", symbol: "⚖️" },
            { id: 12, name: "매달린 사람", symbol: "🙃" },
            { id: 13, name: "죽음", symbol: "💀" },
            { id: 14, name: "절제", symbol: "🍵" },
            { id: 15, name: "악마", symbol: "😈" },
            { id: 16, name: "탑", symbol: "🗼" },
            { id: 17, name: "별", symbol: "⭐" },
            { id: 18, name: "달", symbol: "🌕" },
            { id: 19, name: "태양", symbol: "☀️" },
            { id: 20, name: "심판", symbol: "📯" },
            { id: 21, name: "세계", symbol: "🌍" }
        ];
        
        // 스테이지 정의
        const stages = [
            {
                title: "제1장: 시작의 문",
                description: "당신의 여정이 시작됩니다. 어떤 카드가 당신을 부르는지 직감으로 선택하세요.",
                cards: [0, 1, 2, 3],
                stories: {
                    0: "당신은 절벽 앞에 서 있습니다. 망설임 없이 뛰어내리자 신비한 바람이 당신을 감싸 안았습니다. 무모해 보이는 선택이 때로는 가장 큰 가능성을 열어줍니다.",
                    1: "눈앞에 신비한 문이 나타납니다. 문을 열자 빛의 세계가 펼쳐집니다. 당신은 자신의 힘으로 운명을 창조할 수 있는 능력을 가지고 있습니다.",
                    2: "고요한 숲속, 달빛 아래 당신은 비밀의 책을 발견합니다. 그 안에는 당신만이 읽을 수 있는 지혜가 담겨 있습니다. 직관을 따르는 여정이 시작됩니다.",
                    3: "화려한 정원에서 당신은 왕관을 쓴 여인을 만납니다. 그녀는 당신에게 풍요와 창조의 힘을 선물합니다. 당신 안에 내재된 풍요로움을 발견하는 여정입니다."
                }
            },
            {
                title: "제2장: 선택의 갈림길",
                description: "첫 번째 시험을 통과했습니다. 이제 당신 앞에 갈림길이 나타납니다. 어떤 길을 선택하시겠습니까?",
                cards: [6, 7, 8, 9],
                stories: {
                    6: "두 사람이 당신 앞에 나타납니다. 하나를 선택해야 하지만, 그것은 단순한 사랑이 아닌 가치관의 선택입니다. 당신은 마음의 소리를 따릅니다.",
                    7: "빠른 속도로 달리는 전차가 당신을 맞이합니다. 올라타자 당신은 모든 장애물을 뚫고 앞으로 나아갑니다. 당신의 의지가 운명을 결정합니다.",
                    8: "거대한 사자가 길을 막고 있습니다. 두려움 대신 당신은 부드럽게 다가가 사자를 길들입니다. 진정한 힘은 통제가 아닌 조화에서 옵니다.",
                    9: "어두운 동굴이 나타납니다. 작은 등불 하나만 들고 들어가는 용기를 내자, 내면의 지혜가 당신을 인도합니다. 고독한 성찰의 시간이 필요합니다."
                }
            },
            {
                title: "제3장: 시련의 순간",
                description: "여정이 계속됩니다. 이제 당신은 피할 수 없는 시련과 마주합니다. 어떻게 대응하시겠습니까?",
                cards: [12, 13, 15, 16],
                stories: {
                    12: "당신은 갑자기 거꾸로 매달립니다. 세상이 뒤집혀 보이지만, 이 관점의 변화는 새로운 통찰력을 줍니다. 때로는 모든 것을 내려놓아야 합니다.",
                    13: "모든 것이 사라지는 순간을 경험합니다. 두려운 순간이지만, 이것은 끝이 아닌 변화의 시작입니다. 낡은 것이 가야 새것이 올 수 있습니다.",
                    15: "어둠 속에서 당신을 유혹하는 목소리가 들립니다. 쉬운 길을 제안하지만, 대가는 너무 큽니다. 당신의 내면의 욕망과 그림자를 직면하는 시간입니다.",
                    16: "갑작스러운 번개가 당신이 쌓아온 탑을 무너뜨립니다. 고통스럽지만, 이는 진정한 토대 위에 다시 세우라는 신호입니다. 파괴 후에 재건이 따릅니다."
                }
            },
            {
                title: "제4장: 희망의 빛",
                description: "시련을 지나 희망의 빛이 보입니다. 당신의 여정에 어떤 빛이 함께할까요?",
                cards: [17, 18, 19, 20],
                stories: {
                    17: "어둠 속에서 빛나는 별들이 당신을 인도합니다. 희망과 영감이 당신 안에 새롭게 피어납니다. 당신은 자신만의 별자리를 만들어갑니다.",
                    18: "신비로운 달빛 아래, 숨겨진 진실이 드러납니다. 환상과 현실 사이에서 당신은 더 깊은 의식의 세계로 들어갑니다. 무의식의 지혜를 담아가세요.",
                    19: "따뜻한 태양빛이 당신을 감싸안습니다. 모든 불확실성이 사라지고 명확한 길이 보입니다. 성공과 성취의 순간이 찾아왔습니다.",
                    20: "거대한 나팔 소리와 함께 부활의 순간이 찾아옵니다. 과거의 모든 선택들이 심판대에 오르지만, 이는 새로운 시작을 위한 정화입니다."
                }
            },
            {
                title: "제5장: 운명의 완성",
                description: "여정의 마지막 단계입니다. 당신의 운명을 완성할 카드를 선택하세요.",
                cards: [5, 10, 11, 21],
                stories: {
                    5: "전통과 지혜의 수호자가 당신을 맞이합니다. 이제 당신은 배움을 나눌 준비가 되었습니다. 정신적 가이드로서의 여정이 시작됩니다.",
                    10: "운명의 수레바퀴가 돌아갑니다. 때로는 위로, 때로는 아래로. 삶의 순환을 받아들이고 그 흐름에 몸을 맡기는 것이 지혜입니다.",
                    11: "균형 잡힌 저울을 든 정의의 여신이 나타납니다. 당신의 모든 행동에는 결과가 따릅니다. 진실과 공정함이 당신의 길이 됩니다.",
                    21: "마침내 당신은 세계의 중심에 섭니다. 모든 요소가 조화롭게 어우러지는 완성의 순간입니다. 하나의 여정이 끝나고 새로운 순환이 시작됩니다."
                }
            }
        ];
        
        // 엔딩 정의 (선택한 카드 조합에 따라 다양한 엔딩 구성)
        const endings = {
            // 몇 가지 예시 엔딩 (실제로는 더 많은 조합 필요)
            "0,7,13,19,21": "「빛의 혁명가」\n\n무모해 보이는 시작이었지만, 당신의 강한 의지는 모든 장애물을 뚫고 변화를 이끌어냈습니다. 죽음의 카드가 가져온 변화는 태양의 빛으로 이어졌고, 결국 당신은 세계의 중심에 서게 되었습니다. 당신은 새로운 시대를 여는 혁명가입니다. 두려움 없이 앞으로 나아가며 세상에 긍정적인 변화를 가져올 것입니다.",
            "1,6,15,17,11": "「균형의 마법사」\n\n창조의 힘으로 시작한 당신의 여정은 선택의 기로에서 사랑을 택했지만, 내면의 어둠과도 맞닥뜨렸습니다. 하지만 별의 희망을 통해 정의로운 균형을 찾아냈습니다. 당신은 빛과 어둠, 사랑과 이성 사이의 균형을 이루는 마법사입니다. 세상에 조화를 가져오는 중재자가 될 것입니다.",
            "2,9,12,18,10": "「신비의 현자」\n\n직관으로 시작된 당신의 여정은 고독한 성찰과 관점의 전환을 거쳐 달의 신비로운 세계로 이어졌습니다. 결국 운명의 수레바퀴와 마주하며 순환의 지혜를 얻었습니다. 당신은 현실 너머의 진실을 볼 수 있는 현자입니다. 직관과 지혜로 다른 이들을 깨우치는 안내자가 될 것입니다.",
            "3,8,16,20,5": "「지혜의 통치자」\n\n풍요로움으로 시작한 여정은 진정한 힘의 의미를 배웠고, 무너진 탑을 통해 허상을 버렸습니다. 심판의 순간을 거쳐 지혜의 전수자가 되었습니다. 당신은 힘과 지혜를 겸비한 통치자입니다. 파괴 후의 재건을 이끌며, 배움과 전통의 가치를 중요시하는 리더가 될 것입니다."
        };
        
        // 기본 게임 상태
        let gameState = {
            currentStage: 0,
            selectedCards: [],
            storyPath: []
        };
        
        // DOM 요소
        const introSection = document.getElementById('intro');
        const gameStageSection = document.getElementById('game-stage');
        const endingSection = document.getElementById('ending');
        const stageTitle = document.getElementById('stage-title');
        const stageDescription = document.getElementById('stage-description');
        const cardsContainer = document.getElementById('cards-container');
        const storyText = document.getElementById('story-text');
        const nextButton = document.getElementById('next-button');
        const startButton = document.getElementById('start-button');
        const restartButton = document.getElementById('restart-button');
        const endingText = document.getElementById('ending-text');
        
        // 게임 시작
        startButton.addEventListener('click', startGame);
        nextButton.addEventListener('click', goToNextStage);
        restartButton.addEventListener('click', restartGame);
        
        function startGame() {
            gameState = {
                currentStage: 0,
                selectedCards: [],
                storyPath: []
            };
            
            introSection.classList.add('hidden');
            gameStageSection.classList.remove('hidden');
            endingSection.classList.add('hidden');
            
            loadStage(gameState.currentStage);
        }
        
        function loadStage(stageIndex) {
            const stage = stages[stageIndex];
            
            stageTitle.textContent = stage.title;
            stageDescription.textContent = stage.description;
            storyText.classList.add('hidden');
            nextButton.disabled = true;
            
            // 카드 생성
            cardsContainer.innerHTML = '';
            stage.cards.forEach(cardId => {
                const card = tarotCards[cardId];
                const cardElement = document.createElement('div');
                cardElement.className = 'card';
                cardElement.dataset.cardId = card.id;
                
                cardElement.innerHTML = `
                    <div class="card-front">
                        <div class="card-image">${card.symbol}</div>
                        <div class="card-name">${card.name}</div>
                    </div>
                `;
                
                cardElement.addEventListener('click', () => selectCard(cardElement, card.id));
                cardsContainer.appendChild(cardElement);
            });
        }
        
        function selectCard(cardElement, cardId) {
            // 이미 선택된 카드가 있으면 선택 해제
            const selectedCard = cardsContainer.querySelector('.card.selected');
            if (selectedCard) {
                selectedCard.classList.remove('selected');
            }
            
            // 새 카드 선택
            cardElement.classList.add('selected');
            
            // 스토리 표시
            const stage = stages[gameState.currentStage];
            storyText.textContent = stage.stories[cardId];
            storyText.classList.remove('hidden');
            
            // 다음 버튼 활성화
            nextButton.disabled = false;
            
            // 게임 상태 업데이트
            gameState.selectedCards[gameState.currentStage] = cardId;
            gameState.storyPath[gameState.currentStage] = stage.stories[cardId];
        }
        
        function goToNextStage() {
            gameState.currentStage++;
            
            if (gameState.currentStage < stages.length) {
                loadStage(gameState.currentStage);
            } else {
                showEnding();
            }
        }
        
        function showEnding() {
            gameStageSection.classList.add('hidden');
            endingSection.classList.remove('hidden');
            
            // 선택한 카드 조합으로 엔딩 결정
            const cardCombo = gameState.selectedCards.join(',');
            let endingResult = '';
            
            // 정의된 엔딩이 있는지 확인
            if (endings[cardCombo]) {
                endingResult = endings[cardCombo];
            } else {
                // 정의되지 않은 조합인 경우 기본 엔딩 생성
                // 마지막 카드에 따라 다른 엔딩
                const lastCard = gameState.selectedCards[gameState.selectedCards.length - 1];
                
                if (lastCard === 5) {
                    endingResult = "「지혜의 탐구자」\n\n당신의 여정은 지식과 전통의 가치를 깨닫게 했습니다. 배움을 추구하며 그 지혜를 다른 이들과 나누는 것이 당신의 운명입니다.";
                } else if (lastCard === 10) {
                    endingResult = "「운명의 춤꾼」\n\n인생의 순환을 받아들이는 법을 배웠습니다. 당신은 변화에 유연하게 적응하며 운명의 흐름에 몸을 맡기는 지혜를 가졌습니다.";
                } else if (lastCard === 11) {
                    endingResult = "「정의의 수호자」\n\n진실과 균형의 중요성을 깨달았습니다. 당신은 공정함을 추구하며, 세상에 정의를 가져오는 역할을 할 것입니다.";
                } else if (lastCard === 21) {
                    endingResult = "「완성의 여행자」\n\n모든 것이 하나로 연결되어 있음을 이해하게 되었습니다. 당신은 전체성을 추구하며, 삶의 모든 측면을 조화롭게 통합하는 여정을 계속할 것입니다.";
                }
            }
            
            endingText.innerText = endingResult;
        }
        
        function restartGame() {
            endingSection.classList.add('hidden');
            introSection.classList.remove('hidden');
        }
    </script>
</body>
</html>